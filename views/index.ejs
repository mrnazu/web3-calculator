<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Solidity Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/web3/dist/web3.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #loading { display: none; color: blue; }
    </style>
</head>
<body>
    <h1>Solidity Calculator</h1>
    <div>
        <input type="number" id="num1" placeholder="Number 1">
        <input type="number" id="num2" placeholder="Number 2">
    </div>
    <div>
        <button onclick="performCalculation('add')">Add</button>
        <button onclick="performCalculation('subtract')">Subtract</button>
        <button onclick="performCalculation('multiply')">Multiply</button>
        <button onclick="performCalculation('divide')">Divide</button>
    </div>
    <div>
        <h2>Result: <span id="result"></span></h2>
    </div>
    <div id="loading">Calculating...</div>
    <script>
        async function performCalculation(operation) {
            const num1 = document.getElementById("num1").value;
            const num2 = document.getElementById("num2").value;

            if (num1 === '' || num2 === '') {
                alert("Please enter both numbers");
                return;
            }

            document.getElementById("loading").style.display = 'block';

            try {
                const response = await fetch('/calculate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ num1, num2, operation })
                });

                if (response.ok) {
                    const data = await response.json();
                    document.getElementById("result").innerText = data.result;
                } else {
                    const error = await response.json();
                    alert("Error: " + error.error);
                }
            } catch (error) {
                alert("Error: " + error.message);
            } finally {
                document.getElementById("loading").style.display = 'none';
            }
        }
    </script>
</body>
</html>
